{
    // SSE 事件类型：status=会话状态推送，approval_required=等待用户审批
    "type": "status",
    "data": {
        // 会话 ID，用于 GET /agent/status 订阅与 POST /agent/approve 提交
        "thread_id": "ec0dce9b-518a-45eb-ad78-782f5a57df1c",
        // 会话状态：running | awaiting_approval | completed | cancelled | paused
        "status": "completed",
        // 会话名称，作为标题展示
        "name": "关键词提取",
        // meta信息，用于展示
        "meta": {
            "entity_uuid": "a8d093df14bb1fc02c4e73cc873ca996",
            "entity_type": "article",
            "agent_id": "63927dc31c2f44cc1c3603bad327c1bf"
        },
        // 执行步骤列表；每步含 node、ts，或有 tool_calls/result_summary；人审步骤另有 approval_decision、approval_decision_detail、approved_at、approval_payload
        "steps": [
            {
                // 步骤所属节点名（如 model、tools、中间件 after_model）
                "node": "model",
                // 步骤发生时间，ISO 8601
                "ts": "2026-02-04T16:56:04.173169",
                // 本步触发的工具调用列表（name、args）；人审步骤还会有 approval_decision、approval_decision_detail、approved_at、approval_payload
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "in_progress"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "pending"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "pending"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "pending"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "pending"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "pending"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:04.183525"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:04.194118"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:04.210196",
                // 工具执行结果摘要（无 tool_calls 时出现），preview 为内容前 150 字
                "result_summary": {
                    "content_length": 427,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'in_progress'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_conten..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:10.028368",
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "completed"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "in_progress"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "pending"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "pending"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "pending"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "pending"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:10.046216"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:10.058401"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:10.082244",
                "result_summary": {
                    "content_length": 429,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'completed'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:13.612369",
                "tool_calls": [
                    {
                        "name": "get_entity",
                        "args": {
                            "uuid": "a8d093df14bb1fc02c4e73cc873ca996",
                            "entity_type": "article",
                            "fields": [
                                "clean_content"
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:13.621974"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:13.630118"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:13.645356",
                "result_summary": {
                    "content_length": 627,
                    "preview": "{\"clean_content\": \"How to instantly change all text on your website to be lowercase\\n\\n\\n\\n    29 Jan, 2026\\n\\n\\n\\nHeya!\\nDid you make that there's a ..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:19.863921",
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "completed"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "in_progress"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "pending"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "pending"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "pending"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:19.885325"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:19.898430"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:19.914258",
                "result_summary": {
                    "content_length": 431,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'completed'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:26.146487",
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "completed"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "completed"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "in_progress"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "pending"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "pending"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:26.164764"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:26.181809"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:26.200710",
                "result_summary": {
                    "content_length": 433,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'completed'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:39.151512",
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "completed"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "completed"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "completed"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "in_progress"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "pending"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:39.165703"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:39.179353"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:39.198239",
                "result_summary": {
                    "content_length": 435,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'completed'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:45.119721",
                "tool_calls": [
                    {
                        "name": "modify_entity",
                        "args": {
                            "uuid": "a8d093df14bb1fc02c4e73cc873ca996",
                            "entity_type": "article",
                            "field": "keywords",
                            "value": [
                                "text-transform",
                                "lowercase",
                                "css",
                                "website",
                                "characters",
                                "uppercase",
                                "blog"
                            ]
                        }
                    }
                ]
            },
            {
                "node": "__interrupt__",
                "ts": "2026-02-04T16:56:45.133077",
                "approval_decision": "approve",
                "approval_decision_detail": {
                    "type": "approve"
                },
                "approved_at": "2026-02-04T16:56:50.556861",
                "approval_payload": {
                    "action_requests": [
                        {
                            "name": "modify_entity",
                            "args": {
                                "uuid": "a8d093df14bb1fc02c4e73cc873ca996",
                                "entity_type": "article",
                                "field": "keywords",
                                "value": [
                                    "text-transform",
                                    "lowercase",
                                    "css",
                                    "website",
                                    "characters",
                                    "uppercase",
                                    "blog"
                                ]
                            },
                            "description": "Agent 尝试修改 keywords 字段，请确认是否继续。"
                        }
                    ],
                    "review_configs": [
                        {
                            "action_name": "modify_entity",
                            "allowed_decisions": [
                                "approve",
                                "reject"
                            ]
                        }
                    ]
                }
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:50.584242",
                "tool_calls": [
                    {
                        "name": "modify_entity",
                        "args": {
                            "uuid": "a8d093df14bb1fc02c4e73cc873ca996",
                            "entity_type": "article",
                            "field": "keywords",
                            "value": [
                                "text-transform",
                                "lowercase",
                                "css",
                                "website",
                                "characters",
                                "uppercase",
                                "blog"
                            ]
                        }
                    }
                ]
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:50.601289"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:50.642043",
                "result_summary": {
                    "content_length": 128,
                    "preview": "{\"success\": true, \"message\": \"字段已更新\", \"uuid\": \"a8d093df14bb1fc02c4e73cc873ca996\", \"entity_type\": \"article\", \"field\": \"keywords\"}"
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:56:57.057757",
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "completed"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "completed"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "completed"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "in_progress"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:56:57.072371"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:56:57.088066"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:56:57.107883",
                "result_summary": {
                    "content_length": 437,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'completed'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:57:11.523908",
                "tool_calls": [
                    {
                        "name": "write_todos",
                        "args": {
                            "todos": [
                                {
                                    "content": "创建任务分解和进度跟踪",
                                    "status": "completed"
                                },
                                {
                                    "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "检查clean_content字段是否为空或None",
                                    "status": "completed"
                                },
                                {
                                    "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                                    "status": "completed"
                                },
                                {
                                    "content": "将关键词列表写入keywords字段",
                                    "status": "completed"
                                },
                                {
                                    "content": "输出最终结果和原因说明",
                                    "status": "completed"
                                }
                            ]
                        }
                    }
                ]
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:57:11.535248"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:57:11.546702"
            },
            {
                "node": "tools",
                "ts": "2026-02-04T16:57:11.561964",
                "result_summary": {
                    "content_length": 435,
                    "preview": "Updated todo list to [{'content': '创建任务分解和进度跟踪', 'status': 'completed'}, {'content': '读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字..."
                }
            },
            {
                "node": "model",
                "ts": "2026-02-04T16:57:13.349315",
                "result_summary": {
                    "content_length": 60,
                    "preview": "**任务完成** - 关键词提取任务已成功执行，所有步骤均按Workflow要求完成，关键词已按要求提取并写入指定字段。"
                }
            },
            {
                "node": "HumanInTheLoopMiddleware.after_model",
                "ts": "2026-02-04T16:57:13.360157"
            },
            {
                "node": "TodoListMiddleware.after_model",
                "ts": "2026-02-04T16:57:13.378101"
            }
        ],
        // 任务列表（write_todos 维护），每项 content + status：pending | in_progress | completed
        "todos": [
            {
                "content": "创建任务分解和进度跟踪",
                "status": "completed"
            },
            {
                "content": "读取UUID为a8d093df14bb1fc02c4e73cc873ca996的article实体的clean_content字段",
                "status": "completed"
            },
            {
                "content": "检查clean_content字段是否为空或None",
                "status": "completed"
            },
            {
                "content": "对clean_content内容进行关键词提取（原文提取、去重、语言一致性、权重排序）",
                "status": "completed"
            },
            {
                "content": "将关键词列表写入keywords字段",
                "status": "completed"
            },
            {
                "content": "输出最终结果和原因说明",
                "status": "completed"
            }
        ],
        // 当前待审批上下文；非空时表示处于 awaiting_approval，重连后可据此恢复审批 UI；审批提交后为 null
        "pending_approval": null,
        // 会话最后更新时间
        "updated_at": "2026-02-04T16:57:13.390000",
        // 是否有正在运行的后台任务
        "is_running": false
    }
}

// 审批事件示例：
/*
{
    "type": "approval_required",
    "data": {
        "payload": {
            "action_requests": [
                {
                    "name": "modify_entity",
                    "args": {
                        "uuid": "a8d093df14bb1fc02c4e73cc873ca996",
                        "entity_type": "article",
                        "field": "keywords",
                        "value": [
                            "text-transform",
                            "lowercase",
                            "css",
                            "website",
                            "characters",
                            "uppercase",
                            "blog"
                        ]
                    },
                    "description": "Agent 尝试修改 keywords 字段，请确认是否继续。"
                }
            ],
            "review_configs": [
                {
                    "action_name": "modify_entity",
                    "allowed_decisions": [
                        "approve",
                        "reject"
                    ]
                }
            ]
        },
        "thread_id": "ec0dce9b-518a-45eb-ad78-782f5a57df1c"
    }
}
*/